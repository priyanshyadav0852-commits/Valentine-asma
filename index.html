<!DOCTYPE html>
<html>
<head>
  <title>Mini Free Fire</title>
  <style>
    body {
      margin: 0;
      background: black;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Player
let player = {
  x: canvas.width / 2,
  y: canvas.height - 80,
  size: 30,
  speed: 7
};

// Bullets
let bullets = [];
let enemies = [];

// Controls
let keys = {};

window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

// Shoot
window.addEventListener("click", () => {
  bullets.push({ x: player.x, y: player.y });
});

// Enemy spawn
setInterval(() => {
  enemies.push({
    x: Math.random() * canvas.width,
    y: -40,
    size: 30
  });
}, 1000);

function update() {
  // Move player
  if (keys["a"] && player.x > 0) player.x -= player.speed;
  if (keys["d"] && player.x < canvas.width) player.x += player.speed;
  if (keys["w"] && player.y > 0) player.y -= player.speed;
  if (keys["s"] && player.y < canvas.height) player.y += player.speed;

  // Move bullets
  bullets.forEach(b => b.y -= 10);

  // Move enemies
  enemies.forEach(e => e.y += 3);

  // Collision
  enemies.forEach((e, ei) => {
    bullets.forEach((b, bi) => {
      if (
        Math.abs(e.x - b.x) < 20 &&
        Math.abs(e.y - b.y) < 20
      ) {
        enemies.splice(ei, 1);
        bullets.splice(bi, 1);
      }
    });
  });
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Player
  ctx.fillStyle = "cyan";
  ctx.fillRect(player.x - 15, player.y - 15, 30, 30);

  // Bullets
  ctx.fillStyle = "yellow";
  bullets.forEach(b =>
    ctx.fillRect(b.x - 5, b.y - 10, 10, 20)
  );

  // Enemies
  ctx.fillStyle = "red";
  enemies.forEach(e =>
    ctx.fillRect(e.x - 15, e.y - 15, 30, 30)
  );
}

function gameLoop() {
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
